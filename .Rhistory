library(cancensus)
library(tidyverse)
options(cancensus.api_key = "CensusMapper_ec721325d8f0b73622eb6a175f8de05a")
listVar21 <- list_census_vectors("CA21")
listReg21 <- list_census_regions("CA21")
c(1,4,6,11,68,251,326,10,553,1156,581,906,1085,4431,4821,4875,4878,4881,4884,
4887,4893,4890,4896,4899,4902,4905,4908,4911,4914,4210,4335,4216,4239,4262,
4274,4290,4311,5820,6501,6504,7644,5751,440,528,4264)
as.character(
c(1,4,6,11,68,251,326,10,553,1156,581,906,1085,4431,4821,4875,4878,4881,4884,
4887,4893,4890,4896,4899,4902,4905,4908,4911,4914,4210,4335,4216,4239,4262,
4274,4290,4311,5820,6501,6504,7644,5751,440,528,4264))
View(listVar21)
paste0("va_CA21_"
as.character(c(1,4,6,11,68,251,326,10,553,1156,581,906,1085,1088,1094,1097,4431,
paste0("va_CA21_",
as.character(c(1,4,6,11,68,251,326,10,553,1156,581,906,1085,1088,1094,1097,4431,
4821,4875,4878,4881,4884,4887,4893,4890,4896,4899,4902,4905,4908,
4911,4914,4210,4335,4216,4239,4262,4274,4290,4311,5820,6501,6504,
7644,5751,440,528,4264))
)
query<-paste0("va_CA21_",
as.character(c(1,4,6,11,68,251,326,10,553,1156,581,906,1085,1088,
1094,1097,4431,4821,4875,4878,4881,4884,4887,4893,
4890,4896,4899,4902,4905,4908,4911,4914,4210,4335,
4216,4239,4262,4274,4290,4311,5820,6501,6504,7644,
5751,440,528,4264))
)
View(listReg21)
unique(listReg21$level)
boundaries21<-st_read("C:\\CEDEUS\\2022\\oct03_census2021\\input\\boundaries_21DA\\lda_000b21a_e\\lda_000b21a_e.shp")
library(sf)
boundaries21<-st_read("C:\\CEDEUS\\2022\\oct03_census2021\\input\\boundaries_21DA\\lda_000b21a_e\\lda_000b21a_e.shp")
library(sf)
library(cancensus)
library(tidyverse)
options(cancensus.api_key = "CensusMapper_ec721325d8f0b73622eb6a175f8de05a")
query21da<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
use_cache = T)
query
boundaries21$DAUID
query<-paste0("V_CA21_",
as.character(c(1,4,6,11,68,251,326,10,553,1156,581,906,1085,1088,
1094,1097,4431,4821,4875,4878,4881,4884,4887,4893,
4890,4896,4899,4902,4905,4908,4911,4914,4210,4335,
4216,4239,4262,4274,4290,4311,5820,6501,6504,7644,
5751,440,528,4264))
)
gc()
# DA ----------------------------------------------------------------------
#Non-spatial
query21da<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
use_cache = T)
View(query21da)
query<-paste0("v_CA21_",
as.character(c(1,4,6,11,68,251,326,10,553,1156,581,906,1085,1088,
1094,1097,4431,4821,4875,4878,4881,4884,4887,4893,
4890,4896,4899,4902,4905,4908,4911,4914,4210,4335,
4216,4239,4262,4274,4290,4311,5820,6501,6504,7644,
5751,440,528,4264))
)
#Non-spatial
query21da<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
use_cache = T)
library(sf)
library(cancensus)
library(tidyverse)
set_cancensus_cache_path("C:\\CEDEUS\\2022\\oct03_census2021\\cache")
boundaries21$DAUID
query21da<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
use_cache = T)
options(cancensus.api_key = "CensusMapper_ec721325d8f0b73622eb6a175f8de05a")
set_cancensus_cache_path("C:\\CEDEUS\\2022\\oct03_census2021\\cache")
query21da<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
use_cache = T)
boundaries21$DAUID[1:5]
query21da<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[1:5]),
vector=query,
level="DA",
use_cache = T)
57932/2
query21da<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[1:(57932/2)]),
vector=query,
level="DA",
use_cache = T)
query21da_<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
use_cache = T)
(57932/2)+1
query21da_2<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[(57932/2+1):57932]),
vector=query,
level="DA",
use_cache = T)
#Spatial
query21da_sf<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
geoformat= "sf",
use_cache = T)
query21da_sf<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID),
vector=query,
level="DA",
geo_format = "sf",
use_cache = T)
get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[1:(57932/2)]),
vector=query,
level="DA",
use_cache = T,
geo_format = "sf")
query21da_sf<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[1:(57932/2)]),
vector=query,
level="DA",
use_cache = T,
geo_format = "sf")
query21da_sf<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[1:7]),
vector=query,
level="DA",
use_cache = T,
geo_format = "sf")
query21da_sf<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[1:(57932/2)]),
vector=query,
level="DA",
use_cache = T,
geo_format = "sf")
?get_census
boundaries21$DAUID[1:(57932/2)]
gc()
query
57932/2
(57932/4)
query21da_sf<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[1:(57932/4)]),
vector=query,
level="DA",
geo_format = "sf")
57932/4*3
57932/4+1
query21da_sf2<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[(57932/4+1):(57932/4*3)]),
vector=query,
level="DA",
geo_format = 'sf')
boundaries21$DAUID[(57932/4+1):(57932/4*3)]
(57932/4+1):(57932/4*3)
(57932/4*3)
(57932/4+1)
14484+1483
14483+14484
(57932/4*2
)
query21da_sf2<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[(57932/4+1):(57932/4*2)]),
vector=query,
level="DA",
geo_format = 'sf')
query21da_sf2<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[(57932/4+1):(57932/4+4)]),#(57932/4*2)]),
vector=query,
level="DA",
geo_format = 'sf')
(57932/4*2)
query21da_sf2<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[(57932/4+1):28966]),#(57932/4*2)]),
vector=query,
level="DA",
geo_format = 'sf')
28967+14483
query21da_sf3<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[28967:43450]),
vector=query,
level="DA",
geo_format = 'sf')
query21da_sf3<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[28967:43450]),
vector=query,
level="DA",
geo_format = 'sf')
set_cancensus_cache_path("C:\\CEDEUS\\2022\\oct03_census2021\\cache")
set_cancensus_cache_path("C:\\CEDEUS\\2022\\oct03_census2021\\cache", install=T)
query21da_sf3<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[28966+1:43450]),
vector=query,
level="DA",
geo_format = 'sf')
boundaries21$DAUID[28966+1:43450
]
query21da_sf3<-get_census(dataset='CA21',
regions= list(DA=boundaries21$DAUID[(28966+1):43450]),
vector=query,
level="DA",
geo_format = 'sf')
